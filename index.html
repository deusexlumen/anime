<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEMOKRATIE 2.0 | Das Sanctum</title>
    <style>
        :root {
            --void: #020202;
            --gold: #d4af37;
            --gold-glow: rgba(212, 175, 55, 0.3);
            --danger: #cf3030;
            --toxin: #8a2be2;
            --tech: #00f0ff;
            --glass: rgba(8, 8, 8, 0.95);
            --font-main: 'Helvetica Neue', Helvetica, Arial, sans-serif;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            background-color: var(--void);
            color: #fff;
            font-family: var(--font-main);
            overflow-x: hidden;
            height: 45000px; /* Gigantische Tiefe f√ºr den Muser-Flow */
            overscroll-behavior: none;
            cursor: crosshair;
        }

        /* --- LAYERS --- */
        #starfield { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 0; pointer-events: none; }
        
        #vignette {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, transparent 30%, #000 120%);
            z-index: 1; pointer-events: none; opacity: 0.8;
        }

        #scanlines {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.1) 50%, rgba(0,0,0,0.1));
            background-size: 100% 4px; z-index: 1; pointer-events: none; opacity: 0.2;
        }

        #tunnel-viewport {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            perspective: 1000px; z-index: 2; overflow: hidden;
            display: flex; justify-content: center; align-items: center;
        }

        #tunnel-world {
            position: absolute; width: 100%; height: 100%;
            transform-style: preserve-3d; will-change: transform;
        }

        /* --- NODES --- */
        .node {
            position: absolute; top: 50%; left: 50%;
            width: 80vw; max-width: 900px; text-align: center; opacity: 0;
            transform: translate3d(-50%, -50%, 0); backface-visibility: hidden;
            z-index: 10;
        }

        /* --- DEBRIS (FLOATING TRUTH) --- */
        .debris {
            position: absolute; top: 50%; left: 50%;
            font-size: 1.2rem; font-weight: 700; color: rgba(255,255,255,0.1);
            white-space: nowrap; pointer-events: none; text-transform: uppercase;
            transform-style: preserve-3d; font-family: monospace; letter-spacing: 0.1em;
            text-shadow: 0 0 10px rgba(0,0,0,1);
        }

        /* --- MONOLITH UI --- */
        .monolith {
            padding: 4rem; background: var(--glass);
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 0 0 1px #000, 0 50px 100px -20px rgba(0,0,0,1);
            position: relative; overflow: hidden; 
            transition: all 0.8s cubic-bezier(0.1, 0.9, 0.2, 1);
            transform-style: preserve-3d;
        }

        .monolith::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 2px;
            background: linear-gradient(90deg, transparent, var(--gold), transparent);
            opacity: 0.5;
        }

        .monolith:hover { border-color: rgba(212,175,55,0.5); transform: scale(1.02) translateZ(50px); }
        .monolith.playing { border-color: var(--gold); box-shadow: 0 0 80px var(--gold-glow); }

        .action-bar { margin-top: 3rem; display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; }

        .btn {
            padding: 15px 30px; border: 1px solid rgba(255,255,255,0.2); color: #ccc;
            font-size: 0.7rem; letter-spacing: 0.25em; cursor: pointer; text-decoration: none;
            transition: 0.3s; text-transform: uppercase; background: transparent; display: inline-block;
        }
        .btn:hover { border-color: var(--gold); color: var(--gold); background: rgba(212,175,55,0.05); }
        .btn-primary { border-color: var(--gold); color: var(--gold); }
        .btn-primary:hover { background: var(--gold); color: #000; box-shadow: 0 0 40px var(--gold-glow); }

        /* --- TYPOGRAPHY --- */
        h1 { font-size: clamp(4rem, 10vw, 12rem); font-weight: 900; letter-spacing: -0.03em; color: #fff; margin-bottom: 2rem; }
        h2 { font-size: 0.9rem; letter-spacing: 0.5em; text-transform: uppercase; color: var(--gold); margin-bottom: 3rem; opacity: 0.8; }
        
        .quote-main { font-size: 1.8rem; font-weight: 300; line-height: 1.4; color: #eee; margin-bottom: 1rem; }
        .quote-sub { font-size: 0.8rem; color: #666; font-family: monospace; text-transform: uppercase; letter-spacing: 0.1em; }

        /* --- SANCTUM (ENDCARD) --- */
        .sanctum-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 2rem;
            margin-top: 3rem; border-top: 1px solid #333; padding-top: 3rem;
        }
        .sanctum-item {
            border: 1px solid rgba(255,255,255,0.1); padding: 2rem; text-align: center;
            transition: 0.3s; cursor: pointer; text-decoration: none; display: block;
        }
        .sanctum-item:hover { border-color: var(--gold); background: rgba(212,175,55,0.05); transform: translateY(-5px); }
        .sanctum-icon { font-size: 2rem; margin-bottom: 1rem; display: block; color: var(--gold); }
        .sanctum-title { color: #fff; font-size: 0.8rem; letter-spacing: 0.2em; text-transform: uppercase; display: block; }

        /* --- DATA OVERLAY --- */
        #data-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.96); z-index: 9999;
            display: flex; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; transition: opacity 0.5s ease;
        }
        #data-overlay.active { opacity: 1; pointer-events: all; }
        .data-card {
            width: 80%; max-width: 900px; max-height: 90vh; overflow-y: auto;
            padding: 5rem; border-left: 4px solid var(--gold);
            background: linear-gradient(90deg, rgba(15,15,15,1) 0%, rgba(25,25,25,1) 100%);
        }
        .data-content h3 { font-size: 2.5rem; color: var(--gold); margin-bottom: 2rem; text-transform: uppercase; }
        .data-content p { font-size: 1.1rem; line-height: 1.8; color: #bbb; margin-bottom: 1.5rem; }
        .close-data { position: absolute; top: 40px; right: 40px; font-size: 1.5rem; color: #555; cursor: pointer; }
        .close-data:hover { color: #fff; }

        /* --- START SCREEN --- */
        #start-screen {
            position: fixed; inset: 0; background: #000; z-index: 10000;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        .init-btn {
            border: 1px solid #fff; padding: 25px 80px; color: #fff;
            font-size: 1rem; letter-spacing: 0.5em; cursor: pointer; transition: 0.5s;
            text-transform: uppercase; background: #000;
        }
        .init-btn:hover { background: #fff; color: #000; box-shadow: 0 0 60px rgba(255,255,255,0.3); }

        ::-webkit-scrollbar { width: 0; }
    </style>
    
    <script src="./dist/bundles/anime.umd.js"></script>
</head>
<body>

    <div id="data-overlay">
        <div class="close-data" onclick="closeData()">√ó ESC</div>
        <div class="data-card">
            <div id="data-content-inject" class="data-content"></div>
        </div>
    </div>

    <div id="start-screen">
        <div class="init-btn" onclick="initializeSanctum()">SYSTEM INITIALISIEREN</div>
        <p style="margin-top:30px; color:#444; font-family:monospace;">AUDIO + GPU</p>
    </div>

    <canvas id="starfield"></canvas>
    <div id="vignette"></div>
    <div id="scanlines"></div>

    <div id="tunnel-viewport">
        <div id="tunnel-world">
            
            <div id="debris-container"></div>

            <section class="node" data-z="0" data-act="prolog">
                <h1>STASIS</h1>
                <p class="quote-main">Der politische Stillstand ist gewollt.</p>
                <div style="margin-top: 15rem; font-size: 0.7rem; letter-spacing: 0.4em; opacity: 0.5;">SCROLLEN ZUM EINTAUCHEN</div>
            </section>

            <section class="node" data-z="7000" data-act="illusion">
                <h2>PHASE I: DIE ILLUSION</h2>
                <audio id="audio-1" src="./2Wie_Bildung_einen_neuen_Adel_schafft.m4a" preload="auto"></audio>
                
                <div class="monolith">
                    <div class="quote-main">"Bildungsideale sind die Gei√üel der Menschheit."</div>
                    <div class="quote-sub">FILE: 2_Bildungsadel.m4a</div>
                    
                    <div class="action-bar">
                        <div class="btn btn-primary" onclick="toggleAudio('audio-1', this.parentNode.parentNode)">‚ñ∂ ABSPIELEN</div>
                        <div class="btn" onclick="openData('bildung')">‚úö ANALYSE</div>
                    </div>
                </div>
            </section>

            <section class="node" data-z="14000" data-act="danger">
                <h2 style="color:var(--danger); border-color:var(--danger);">PHASE II: DER BRAND</h2>
                <audio id="audio-2" src="./3Parteien_als_historischer_Brandbeschleuniger_fuer_Diktaturen.m4a" preload="auto"></audio>
                
                <div class="monolith" style="border-color: rgba(207, 48, 48, 0.3);">
                    <div class="quote-main" style="color: #ffbdbd;">"Parteien sind Brandbeschleuniger f√ºr Diktaturen."</div>
                    <div class="quote-sub" style="color: var(--danger);">FILE: 3_Brandbeschleuniger.m4a</div>
                    
                    <div class="action-bar">
                        <div class="btn" style="border-color:var(--danger); color:var(--danger);" onclick="toggleAudio('audio-2', this.parentNode.parentNode)">‚ñ∂ WARNUNG</div>
                        <div class="btn" style="border-color:var(--danger); color:var(--danger);" onclick="openData('parteien')">‚úö BEWEISF√úHRUNG</div>
                    </div>
                </div>
            </section>

            <section class="node" data-z="21000" data-act="void">
                <h2>PHASE III: DAS VAKUUM</h2>
                <audio id="audio-3" src="./1Warum_Politiker_eigentlich_keine_Politik_machen.m4a" preload="auto"></audio>
                
                <div class="monolith">
                    <div class="quote-main">"Politiker machen keine Politik."</div>
                    <div class="quote-sub">FILE: 1_Dienstleister.m4a</div>
                    
                    <div class="action-bar">
                        <div class="btn btn-primary" onclick="toggleAudio('audio-3', this.parentNode.parentNode)">‚ñ∂ ABSPIELEN</div>
                        <div class="btn" onclick="openData('politiker')">‚úö ANALYSE</div>
                    </div>
                </div>
            </section>

            <section class="node" data-z="28000" data-act="solution">
                <h1 style="font-size: 8rem; text-shadow: 0 0 100px white;">ISONOMIE</h1>
                <audio id="audio-4" src="./4Losdemokratie_als_einziger_Schutz_vor_Faschismus.m4a" preload="auto"></audio>
                
                <div class="monolith" style="background: rgba(255,255,255,0.05); border-color: #fff;">
                    <div class="quote-main" style="color:#fff;">"Der einzige Schutz vor Faschismus."</div>
                    <div class="quote-sub" style="color:#aaa;">FILE: 4_Losdemokratie.m4a</div>
                    
                    <div class="action-bar">
                        <div class="btn" style="border-color:#fff; color:#fff;" onclick="toggleAudio('audio-4', this.parentNode.parentNode)">‚ñ∂ MANIFESTO</div>
                        <div class="btn" style="border-color:#fff; color:#fff;" onclick="openData('los')">‚úö BLUEPRINT</div>
                    </div>
                </div>
            </section>

            <section class="node" data-z="35000" data-act="matrix">
                <h2 style="color:var(--tech); border-color:var(--tech);">THE OMEGA CONSTRUCT</h2>
                
                <div class="monolith" style="padding: 3rem; max-width: 1100px; width: 90vw;">
                    <p style="color:#888; margin-bottom:2rem;">Technische und intellektuelle Validierung des Systems.</p>
                    
                    <div class="sanctum-grid">
                        <a href="https://losdemokratie.de/" target="_blank" class="sanctum-item">
                            <span class="sanctum-icon">üåê</span>
                            <span class="sanctum-title">LOSDEMOKRATIE.DE</span>
                        </a>
                        <a href="https://www.youtube.com/@nuttlos" target="_blank" class="sanctum-item">
                            <span class="sanctum-icon">üì∫</span>
                            <span class="sanctum-title">NUTT LOS (YOUTUBE)</span>
                        </a>
                        <a href="https://www.amazon.de/Gegen-Wahlen-Warum-Abstimmen-demokratisch/dp/3835318713" target="_blank" class="sanctum-item">
                            <span class="sanctum-icon">üìñ</span>
                            <span class="sanctum-title">CODEX: GEGEN WAHLEN</span>
                        </a>
                        <a href="Argumentations-Matrix & System-Validierung.pdf" target="_blank" class="sanctum-item">
                            <span class="sanctum-icon">üíæ</span>
                            <span class="sanctum-title">MATRIX PDF (TECH)</span>
                        </a>
                    </div>

                    <div style="margin-top: 3rem; font-size: 0.7rem; color: #444; font-family: monospace;">
                        SYSTEM STATUS: OPERATIONAL<br>
                        ARCHITECT: ZERO
                    </div>
                </div>
            </section>

        </div>
    </div>

    <script>
        // --- MASSIVE DEBRIS DATA (FROM UPLOADS) ---
        const DEBRIS_WORDS = [
            // Aristokratie & Bildung
            {t:"NEUER ADEL", z:4000}, {t:"PLATONS IRRTUM", z:5000}, {t:"ARROGANZ", z:5500},
            {t:"GEISSEL DER MENSCHHEIT", z:6000}, {t:"EXKLUSION", z:6500}, {t:"HERRSCHAFTSWISSEN", z:7000},
            {t:"IDIOTISCHE FANTASIE", z:8000}, {t:"ARISTOKRATIE", z:8500},
            // Parteien & Brand
            {t:"BRANDBESCHLEUNIGER", z:11000}, {t:"TYRANNEI", z:12000}, {t:"DIKTATUR", z:12500},
            {t:"PARTEIEN SIND SINNLOS", z:13000}, {t:"B√úRGERKRIEG", z:13500}, {t:"SPALTUNG", z:14500},
            {t:"MACHTKAMPF", z:15000}, {t:"KEIN GEWISSEN", z:15500},
            // Politik
            {t:"DIENSTLEISTER", z:18000}, {t:"UNPOLITISCHE GESELLSCHAFT", z:18500}, {t:"UNBEGRIFF", z:19000},
            {t:"LEGITIMATION", z:20000}, {t:"WAHL IST ARISTOKRATISCH", z:20500}, {t:"BERUFSPOLITIK", z:21000},
            // L√∂sung
            {t:"WIR REGIEREN UNS", z:25000}, {t:"ISONOMIE", z:26000}, {t:"GLEICHHEIT", z:27000},
            {t:"SOUVER√ÑNIT√ÑT", z:28000}, {t:"LOSVERFAHREN", z:29000}, {t:"ALEATORIK", z:30000},
            {t:"FREIHEIT", z:31000}, {t:"KEIN TYRANN", z:32000}
        ];

        // --- CONTENT FOR MODALS ---
        const CONTENT_DATA = {
            'bildung': {
                title: 'Der Bildungs-Adel',
                text: 'Unsere Kultur ist getrieben von der idiotischen Fantasie, dass Bildung ein Kriterium f√ºr Herrschaft sein sollte. Das ist purer Platonismus. Wir halten Individuen frei von Arbeit (Aristokraten), damit sie sich "bilden" und dann √ºber uns herrschen. Demokratie bedeutet: JEDER ist f√§hig zu herrschen, unabh√§ngig von Bildung.'
            },
            'parteien': {
                title: 'Brandbeschleuniger',
                text: 'Parteien sind intern Diktaturen. Wer in eine Partei eintritt, gibt sein Gewissen an der Garderobe ab. Historisch gesehen verhindern Parteien keine Diktaturen ‚Äì sie geb√§ren sie. Wenn sich die Gesellschaft spaltet und Parteien gegeneinander Krieg f√ºhren, ist der Ruf nach dem "starken Mann" die logische Konsequenz.'
            },
            'politiker': {
                title: 'Der Dienstleister',
                text: 'Der Begriff "Politiker" ist ein Symptom des Verfalls. In einer Demokratie gibt es keine Politiker, weil ALLE Politiker sind. Was wir heute haben, sind gew√§hlte Aristokraten. Politik ist eine Praxis, kein Beruf.'
            },
            'los': {
                title: 'Die Kinetische L√∂sung',
                text: 'Wenn wir alle regieren, kann kein Tyrann entstehen. Die Losdemokratie ist das einzige System, das Korruption strukturell unm√∂glich macht. Niemand kann "Karriere" machen. Niemand muss wiedergew√§hlt werden. Es z√§hlt nur das Sachproblem.'
            }
        };

        // --- STATE ---
        const STATE = { scroll: 0, target: 0, w: 0, h: 0, act: 'prolog', audioCtx: null, analyser: null, data: null, activeAudio: null };
        const CONFIG = { lerp: 0.03 }; // HEAVY PHYSICS (MUSER MODE)

        // --- DOM ---
        const world = document.getElementById('tunnel-world');
        const canvas = document.getElementById('starfield');
        const ctx = canvas.getContext('2d');

        // --- INIT ---
        window.initializeSanctum = function() {
            window.scrollTo(0,0);
            
            try {
                STATE.audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                STATE.analyser = STATE.audioCtx.createAnalyser();
                STATE.analyser.fftSize = 256;
                STATE.data = new Uint8Array(STATE.analyser.frequencyBinCount);
                
                document.querySelectorAll('audio').forEach(el => {
                    const src = STATE.audioCtx.createMediaElementSource(el);
                    src.connect(STATE.analyser);
                    STATE.analyser.connect(STATE.audioCtx.destination);
                });
            } catch(e) { console.log("Audio Context prevented by browser policy (Localhost)"); }

            document.getElementById('start-screen').style.opacity = 0;
            setTimeout(() => document.getElementById('start-screen').remove(), 1000);
            render();
        };

        // --- DEBRIS GENERATOR ---
        function initDebris() {
            const container = document.getElementById('debris-container');
            DEBRIS_WORDS.forEach(item => {
                for(let i=0; i<3; i++) { // Dichte verdreifachen
                    const el = document.createElement('div');
                    el.className = 'debris';
                    el.textContent = item.t;
                    
                    const x = (Math.random() - 0.5) * 1800; // Weiter Streukreis
                    const y = (Math.random() - 0.5) * 900;
                    const z = item.z + (Math.random() - 0.5) * 1000;
                    
                    el.setAttribute('data-base-z', z);
                    el.style.transform = `translate3d(${x}px, ${y}px, ${z}px)`;
                    
                    if(z > 11000 && z < 16000) el.style.color = '#aa3333'; // Rot in Akt 2
                    
                    container.appendChild(el);
                }
            });
        }

        function init() {
            const r = () => { STATE.w = canvas.width = window.innerWidth; STATE.h = canvas.height = window.innerHeight; };
            window.addEventListener('resize', r); r();
            initDebris();
            document.querySelectorAll('.node').forEach(n => {
                n.style.transform = `translate3d(-50%, -50%, ${n.getAttribute('data-z')}px)`;
            });
        }
        init();

        // --- STARFIELD (REVERSE DIRECTION = ZOOM IN) ---
        class Star {
            constructor() { this.reset(); }
            reset() {
                this.x = (Math.random() - 0.5) * STATE.w * 3;
                this.y = (Math.random() - 0.5) * STATE.h * 3;
                this.z = Math.random() * 2000 + 500; 
                this.size = Math.random() * 2;
            }
            update(speed) {
                // Move TOWARDS camera (Negative Z logic in loop, but here we simulate flow)
                this.z -= (2 + speed * 1.5);
                if(this.z < 1) this.reset();
            }
            draw() {
                const scale = 800 / this.z;
                const x2d = this.x * scale + STATE.w/2;
                const y2d = this.y * scale + STATE.h/2;
                ctx.fillStyle = STATE.act === 'danger' ? '#ff3333' : '#ffffff';
                ctx.globalAlpha = Math.min(1, (2000-this.z)/1000);
                ctx.fillRect(x2d, y2d, this.size*scale, this.size*scale);
            }
        }
        const stars = Array.from({length: 400}, () => new Star());

        // --- MAIN LOOP ---
        function render() {
            STATE.target = window.scrollY;
            const diff = STATE.target - STATE.scroll;
            STATE.scroll += diff * CONFIG.lerp;
            const speed = Math.abs(diff);

            let bass = 0;
            if(STATE.analyser) {
                STATE.analyser.getByteFrequencyData(STATE.data);
                bass = STATE.data[10];
            }

            // MOVE WORLD (Negative Z = Forward Movement)
            world.style.transform = `translate3d(0, 0, ${-STATE.scroll.toFixed(2)}px)`;

            // NODES
            document.querySelectorAll('.node').forEach(n => {
                const z = parseInt(n.getAttribute('data-z'));
                const dist = Math.abs(z - STATE.scroll);
                if(dist < 2000) STATE.act = n.getAttribute('data-act');

                if(dist < 4000) {
                    n.style.visibility = 'visible';
                    n.style.opacity = 1 - (dist/3500);
                } else {
                    n.style.visibility = 'hidden';
                }

                if(STATE.activeAudio && dist > 2500) {
                    const a = document.getElementById(STATE.activeAudio);
                    if(a && !a.paused) { a.pause(); document.querySelector('.monolith.playing').classList.remove('playing'); }
                }
            });

            // DEBRIS VISIBILITY
            document.querySelectorAll('.debris').forEach(d => {
                const z = parseInt(d.getAttribute('data-base-z'));
                const dist = Math.abs(z - STATE.scroll);
                if(dist < 2500) {
                    d.style.opacity = (1 - (dist/2500)) * 0.6;
                    // Parallax effect
                    d.style.transform = `translate3d(${d.style.transform.split('(')[1].split(')')[0]}) scale(${1 + (2500-dist)*0.0005})`;
                } else {
                    d.style.opacity = 0;
                }
            });

            // CANVAS
            ctx.clearRect(0,0,STATE.w, STATE.h);
            stars.forEach(s => { s.update(speed + (bass/100)); s.draw(); });

            requestAnimationFrame(render);
        }

        // --- UTILS ---
        window.openData = (k) => {
            const c = CONTENT_DATA[k];
            document.getElementById('data-content-inject').innerHTML = `<h3>${c.title}</h3><p>${c.text}</p>`;
            document.getElementById('data-overlay').classList.add('active');
        };
        window.closeData = () => document.getElementById('data-overlay').classList.remove('active');
        window.toggleAudio = (id, el) => {
            if(STATE.audioCtx && STATE.audioCtx.state === 'suspended') STATE.audioCtx.resume();
            const a = document.getElementById(id);
            if(!a.paused) {
                a.pause(); el.classList.remove('playing'); STATE.activeAudio = null;
            } else {
                document.querySelectorAll('audio').forEach(x => { x.pause(); x.currentTime=0; });
                document.querySelectorAll('.monolith').forEach(m => m.classList.remove('playing'));
                a.play(); el.classList.add('playing'); STATE.activeAudio = id;
            }
        };
        window.addEventListener('keydown', e => { if(e.key === 'Escape') closeData(); });

    </script>
</body>
</html>
