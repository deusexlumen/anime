<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEMOKRATIE 2.0 | Der Korridor</title>
    <style>
        :root {
            --void: #050505;
            --gold: #d4af37;
            --gold-glow: rgba(212, 175, 55, 0.2);
            --text-grey: #a0a0a0;
            --glass: rgba(10, 10, 12, 0.98);
            --font-main: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            --font-serif: 'Georgia', serif; 
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            background-color: var(--void);
            color: #fff;
            font-family: var(--font-main);
            overflow-x: hidden;
            height: 50000px; /* Extrem langer Weg für ruhiges Lesen */
            overscroll-behavior: none;
            cursor: default;
        }

        /* --- LAYERS --- */
        #starfield { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 0; pointer-events: none; }
        
        #vignette {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, transparent 40%, #000 130%);
            z-index: 1; pointer-events: none;
        }

        #tunnel-viewport {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            perspective: 1000px; z-index: 2; overflow: hidden;
            display: flex; justify-content: center; align-items: center;
        }

        #tunnel-world {
            position: absolute; width: 100%; height: 100%;
            transform-style: preserve-3d; will-change: transform;
        }

        /* --- NODES (Central Content) --- */
        .node {
            position: absolute; top: 50%; left: 50%;
            width: 80vw; max-width: 800px; text-align: center; opacity: 0;
            transform: translate3d(-50%, -50%, 0); backface-visibility: hidden;
            z-index: 100; /* Immer über den Texten an der Seite */
        }

        /* --- MONUMENTS (The readable side-texts) --- */
        .monument {
            position: absolute; top: 50%; left: 50%;
            width: 600px; text-align: left;
            font-family: var(--font-serif);
            font-size: 2.5rem; line-height: 1.2;
            font-weight: 700; color: #333; /* Start dunkel */
            transform-style: preserve-3d;
            pointer-events: none;
            transition: color 0.5s ease, opacity 0.5s ease;
            white-space: normal;
            border-left: 5px solid var(--gold);
            padding-left: 20px;
        }
        
        /* Wenn Monument nah ist (via JS gesteuert) */
        .monument.active { color: #eee; opacity: 1; text-shadow: 0 0 30px rgba(0,0,0,1); }

        /* --- MONOLITH UI (Player Cards) --- */
        .monolith {
            padding: 3rem; background: var(--glass);
            border: 1px solid rgba(255,255,255,0.15);
            box-shadow: 0 0 0 1px #000, 0 30px 80px -10px rgba(0,0,0,0.8);
            transition: all 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
            position: relative; overflow: hidden;
        }
        .monolith::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 3px;
            background: var(--gold); opacity: 0.7;
        }
        .monolith:hover { transform: scale(1.02) translateY(-10px); border-color: #666; }
        .monolith.playing { border-color: var(--gold); box-shadow: 0 0 100px var(--gold-glow); }

        .btn {
            display: inline-block; padding: 15px 30px; margin-top: 20px;
            border: 1px solid #444; color: #aaa; text-transform: uppercase;
            font-size: 0.8rem; letter-spacing: 0.2em; cursor: pointer; text-decoration: none;
            transition: 0.3s; background: transparent;
        }
        .btn:hover { border-color: var(--gold); color: var(--gold); background: rgba(212,175,55,0.05); }
        .btn-primary { border-color: var(--gold); color: var(--gold); }
        .btn-primary:hover { background: var(--gold); color: #000; }

        /* --- TYPOGRAPHY --- */
        h1 { font-size: clamp(4rem, 10vw, 12rem); font-weight: 800; color: #fff; margin-bottom: 2rem; letter-spacing: -0.04em; }
        h2 { font-size: 0.9rem; letter-spacing: 0.5em; text-transform: uppercase; color: var(--gold); margin-bottom: 3rem; border-bottom: 1px solid #333; padding-bottom: 15px; display: inline-block; }
        
        .quote-main { font-family: var(--font-serif); font-size: 1.8rem; font-weight: 300; line-height: 1.4; color: #ddd; margin-bottom: 1rem; }
        .quote-sub { font-size: 0.8rem; color: #666; font-family: monospace; text-transform: uppercase; }

        /* --- SANCTUM LINKS --- */
        .sanctum-grid {
            display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;
            margin-top: 3rem; text-align: left;
        }
        .resource-link {
            display: block; padding: 20px; border: 1px solid #333; text-decoration: none;
            transition: 0.3s; background: rgba(255,255,255,0.02);
        }
        .resource-link:hover { border-color: var(--gold); background: rgba(212,175,55,0.1); }
        .resource-link strong { display: block; color: #fff; font-size: 1.1rem; margin-bottom: 5px; }
        .resource-link span { color: #666; font-size: 0.8rem; letter-spacing: 0.1em; text-transform: uppercase; }

        /* --- OVERLAYS --- */
        #data-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); z-index: 9999;
            display: flex; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; transition: opacity 0.5s ease;
        }
        #data-overlay.active { opacity: 1; pointer-events: all; }
        .data-card {
            width: 80%; max-width: 900px; max-height: 90vh; overflow-y: auto;
            padding: 5rem; border-left: 4px solid var(--gold);
            background: linear-gradient(90deg, #111 0%, #1a1a1a 100%);
        }
        .data-content h3 { font-size: 2.5rem; color: var(--gold); margin-bottom: 2rem; }
        .data-content p { font-size: 1.2rem; line-height: 1.7; color: #ccc; margin-bottom: 1.5rem; }
        .close-btn { position: absolute; top: 30px; right: 40px; font-size: 2rem; color: #666; cursor: pointer; }
        .close-btn:hover { color: #fff; }

        #start-screen {
            position: fixed; inset: 0; background: #000; z-index: 10000;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        .init-btn {
            border: 1px solid #fff; padding: 25px 80px; color: #fff;
            font-size: 1rem; letter-spacing: 0.5em; cursor: pointer; transition: 0.5s;
            text-transform: uppercase; background: #000;
        }
        .init-btn:hover { background: var(--gold); color: #000; border-color: var(--gold); }

        ::-webkit-scrollbar { width: 0; }
    </style>
    
    <script src="./dist/bundles/anime.umd.js"></script>
</head>
<body>

    <div id="data-overlay">
        <div class="close-btn" onclick="closeData()">×</div>
        <div class="data-card">
            <div id="data-content-inject" class="data-content"></div>
        </div>
    </div>

    <div id="start-screen">
        <div class="init-btn" onclick="initializeCorridor()">ARCHIV ÖFFNEN</div>
        <p style="margin-top:20px; color:#444; font-family:monospace;">AUDIO + GPU REQ</p>
    </div>

    <canvas id="starfield"></canvas>
    <div id="vignette"></div>

    <div id="tunnel-viewport">
        <div id="tunnel-world">
            
            <div id="monument-container"></div>

            <section class="node" data-z="0" data-act="prolog">
                <h1>STASIS</h1>
                <p class="quote-main">Wir leben in einer fortwährenden Aristokratie.</p>
                <div style="margin-top: 15rem; font-size: 0.7rem; letter-spacing: 0.4em; opacity: 0.5;">SCROLLEN UM EINZUTRETEN</div>
            </section>

            <section class="node" data-z="8000" data-act="illusion">
                <h2>PHASE I: DIE ILLUSION</h2>
                <audio id="audio-1" src="./2Wie_Bildung_einen_neuen_Adel_schafft.m4a" preload="auto"></audio>
                
                <div class="monolith">
                    <div class="quote-main">"Bildungsideale sind die Geißel der Menschheit."</div>
                    <div class="quote-sub">FILE: 2_Bildungsadel.m4a</div>
                    
                    <div class="action-bar">
                        <div class="btn btn-primary" onclick="toggleAudio('audio-1', this.parentNode.parentNode)">▶ ABSPIELEN</div>
                        <div class="btn" onclick="openData('bildung')">✚ ANALYSE</div>
                    </div>
                </div>
            </section>

            <section class="node" data-z="16000" data-act="danger">
                <h2 style="color:#ff4444; border-color:#ff4444;">PHASE II: DER BRAND</h2>
                <audio id="audio-2" src="./3Parteien_als_historischer_Brandbeschleuniger_fuer_Diktaturen.m4a" preload="auto"></audio>
                
                <div class="monolith" style="border-top-color: #ff4444;">
                    <div class="quote-main">"Parteien sind Brandbeschleuniger für Diktaturen."</div>
                    <div class="quote-sub" style="color:#ff4444;">FILE: 3_Brandbeschleuniger.m4a</div>
                    
                    <div class="action-bar">
                        <div class="btn" style="border-color:#ff4444; color:#ff4444;" onclick="toggleAudio('audio-2', this.parentNode.parentNode)">▶ WARNUNG</div>
                        <div class="btn" style="border-color:#ff4444; color:#ff4444;" onclick="openData('parteien')">✚ FAKTEN</div>
                    </div>
                </div>
            </section>

            <section class="node" data-z="24000" data-act="void">
                <h2>PHASE III: DER UNBEGRIFF</h2>
                <audio id="audio-3" src="./1Warum_Politiker_eigentlich_keine_Politik_machen.m4a" preload="auto"></audio>
                
                <div class="monolith">
                    <div class="quote-main">"Politiker machen keine Politik."</div>
                    <div class="quote-sub">FILE: 1_Dienstleister.m4a</div>
                    
                    <div class="action-bar">
                        <div class="btn btn-primary" onclick="toggleAudio('audio-3', this.parentNode.parentNode)">▶ ABSPIELEN</div>
                        <div class="btn" onclick="openData('politiker')">✚ ANALYSE</div>
                    </div>
                </div>
            </section>

            <section class="node" data-z="32000" data-act="solution">
                <h1 style="font-size: 8rem; text-shadow: 0 0 100px rgba(255,255,255,0.5);">ISONOMIE</h1>
                <audio id="audio-4" src="./4Losdemokratie_als_einziger_Schutz_vor_Faschismus.m4a" preload="auto"></audio>
                
                <div class="monolith" style="background: rgba(255,255,255,0.05); border-top-color: #fff;">
                    <div class="quote-main" style="color:#fff;">"Der einzige Schutz vor Faschismus."</div>
                    <div class="quote-sub" style="color:#aaa;">FILE: 4_Losdemokratie.m4a</div>
                    
                    <div class="action-bar">
                        <div class="btn" style="border-color:#fff; color:#fff;" onclick="toggleAudio('audio-4', this.parentNode.parentNode)">▶ MANIFESTO</div>
                        <div class="btn" style="border-color:#fff; color:#fff;" onclick="openData('los')">✚ BLUEPRINT</div>
                    </div>
                </div>
            </section>

            <section class="node" data-z="40000" data-act="matrix">
                <h2 style="color:var(--gold); border-color:var(--gold);">DAS SANCTUM</h2>
                
                <div class="monolith" style="max-width: 1000px; width: 90vw; padding: 3rem;">
                    <p style="color:#888; text-align:left; max-width:100%; margin-bottom:2rem;">
                        Dies ist das Ende der Geschichte. Und der Anfang der Politik.<br>
                        Nutze diese Ressourcen zum Wiederaufbau.
                    </p>
                    
                    <div class="sanctum-grid">
                        <a href="https://losdemokratie.de/" target="_blank" class="resource-link">
                            <span>DAS PROJEKT</span>
                            <strong>LOSDEMOKRATIE.DE</strong>
                        </a>
                        <a href="https://www.youtube.com/@nuttlos" target="_blank" class="resource-link">
                            <span>DER KANAL</span>
                            <strong>NUTT LOS (YOUTUBE)</strong>
                        </a>
                        <a href="https://www.amazon.de/Gegen-Wahlen-Warum-Abstimmen-demokratisch/dp/3835318713" target="_blank" class="resource-link">
                            <span>DIE BASIS</span>
                            <strong>GEGEN WAHLEN (BUCH)</strong>
                        </a>
                        <a href="Argumentations-Matrix & System-Validierung.pdf" target="_blank" class="resource-link">
                            <span>DER BEWEIS</span>
                            <strong>SYSTEM-VALIDIERUNG (PDF)</strong>
                        </a>
                    </div>
                </div>
            </section>

        </div>
    </div>

    <script>
        // --- MONUMENTS DATA (BIG READABLE QUOTES) ---
        const MONUMENTS = [
            // Akt 1
            {t:"NEUER ADEL", z:3000, x:-500}, 
            {t:"BILDUNG IST EXKLUSION", z:4500, x:500},
            {t:"PLATONISCHER IRRTUM", z:6000, x:-500},
            
            // Akt 2
            {t:"PARTEIEN SIND DIKTATUREN", z:11000, x:500},
            {t:"MACHT GEBIERT TYRANNEI", z:13000, x:-500},
            {t:"WAHLEN SIND ARISTOKRATISCH", z:15000, x:500},
            
            // Akt 3
            {t:"POLITIKER SIND DIENSTLEISTER", z:19000, x:-500},
            {t:"LEGITIMATIONS KRISE", z:21000, x:500},
            {t:"WIR SIND UNPOLITISCH", z:23000, x:-500},
            
            // Akt 4
            {t:"WIR REGIEREN UNS SELBST", z:27000, x:500},
            {t:"KEIN KARRIERISMUS", z:29000, x:-500},
            {t:"SOUVERÄNITÄT", z:31000, x:500},
            {t:"SYSTEM ONLINE", z:36000, x:0}
        ];

        // --- CONTENT DATA ---
        const CONTENT = {
            'bildung': {title: 'Der Bildungs-Adel', text: 'Unsere Kultur ist getrieben von der idiotischen Fantasie, dass Bildung ein Kriterium für Herrschaft sein sollte. Das ist purer Platonismus. Wir halten Individuen frei von Arbeit, damit sie sich "bilden" und dann über uns herrschen. Demokratie bedeutet: JEDER ist fähig zu herrschen.'},
            'parteien': {title: 'Brandbeschleuniger', text: 'Parteien sind intern Diktaturen. Wer in eine Partei eintritt, gibt sein Gewissen an der Garderobe ab. Historisch gesehen verhindern Parteien keine Diktaturen – sie gebären sie.'},
            'politiker': {title: 'Der Dienstleister', text: 'Der Begriff "Politiker" ist ein Symptom des Verfalls. Was wir heute haben, sind gewählte Aristokraten. Politik ist eine Praxis, kein Beruf.'},
            'los': {title: 'Die Lösung', text: 'Wenn wir alle regieren, kann kein Tyrann entstehen. Die Losdemokratie ist das einzige System, das Korruption strukturell unmöglich macht.'}
        };

        const STATE = { scroll: 0, target: 0, w: 0, h: 0, act: 'prolog', audioCtx: null, analyser: null, data: null, activeAudio: null };
        const CONFIG = { lerp: 0.04 }; // Smooth Heavy Physics

        const world = document.getElementById('tunnel-world');
        const canvas = document.getElementById('starfield');
        const ctx = canvas.getContext('2d');

        // --- INIT ---
        window.initializeCorridor = function() {
            window.scrollTo(0,0);
            try {
                STATE.audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                STATE.analyser = STATE.audioCtx.createAnalyser();
                STATE.analyser.fftSize = 256;
                STATE.data = new Uint8Array(STATE.analyser.frequencyBinCount);
                document.querySelectorAll('audio').forEach(el => {
                    const src = STATE.audioCtx.createMediaElementSource(el);
                    src.connect(STATE.analyser);
                    STATE.analyser.connect(STATE.audioCtx.destination);
                });
            } catch(e) {}
            document.getElementById('start-screen').style.opacity = 0;
            setTimeout(() => document.getElementById('start-screen').remove(), 1000);
            render();
        };

        // --- MONUMENTS GENERATOR ---
        function initMonuments() {
            const container = document.getElementById('monument-container');
            MONUMENTS.forEach(item => {
                const el = document.createElement('div');
                el.className = 'monument';
                el.textContent = item.t;
                // Positionierung an den Wänden
                el.style.transform = `translate3d(-50%, -50%, 0) translate3d(${item.x}px, 0, ${item.z}px)`;
                el.setAttribute('data-z', item.z);
                
                // Color Logic
                if(item.z > 10000 && item.z < 17000) { el.style.borderLeftColor = '#ff4444'; el.style.color = '#500'; }
                if(item.z > 26000) { el.style.borderLeftColor = '#fff'; el.style.color = '#555'; }
                
                container.appendChild(el);
            });
        }

        function init() {
            const r = () => { STATE.w = canvas.width = window.innerWidth; STATE.h = canvas.height = window.innerHeight; };
            window.addEventListener('resize', r); r();
            initMonuments();
            document.querySelectorAll('.node').forEach(n => {
                n.style.transform = `translate3d(-50%, -50%, ${n.getAttribute('data-z')}px)`;
            });
        }
        init();

        // --- STARFIELD (ZOOM IN EFFECT) ---
        class Star {
            constructor() { this.reset(); }
            reset() {
                this.x = (Math.random() - 0.5) * STATE.w * 3;
                this.y = (Math.random() - 0.5) * STATE.h * 3;
                this.z = Math.random() * 2000 + 500; 
                this.size = Math.random() * 2;
            }
            update(speed) {
                // MOVE TOWARDS CAMERA (Zoom In)
                this.z -= (2 + speed * 1.5);
                if(this.z < 1) this.reset();
            }
            draw() {
                const scale = 800 / this.z;
                const x2d = this.x * scale + STATE.w/2;
                const y2d = this.y * scale + STATE.h/2;
                ctx.fillStyle = '#fff';
                ctx.globalAlpha = Math.min(1, (2000-this.z)/1000);
                ctx.fillRect(x2d, y2d, this.size*scale, this.size*scale);
            }
        }
        const stars = Array.from({length: 300}, () => new Star());

        // --- LOOP ---
        function render() {
            STATE.target = window.scrollY;
            const diff = STATE.target - STATE.scroll;
            STATE.scroll += diff * CONFIG.lerp;
            const speed = Math.abs(diff);

            // AUDIO BASS
            let bass = 0;
            if(STATE.analyser) {
                STATE.analyser.getByteFrequencyData(STATE.data);
                bass = STATE.data[10];
            }

            // CAMERA MOVEMENT
            // Wir bewegen die Welt auf uns zu (Negative Z)
            world.style.transform = `translate3d(0, 0, ${-STATE.scroll.toFixed(2)}px)`;

            // ELEMENT LOGIC
            document.querySelectorAll('.node').forEach(n => {
                const z = parseInt(n.getAttribute('data-z'));
                const dist = Math.abs(z - STATE.scroll);
                if(dist < 3000) STATE.act = n.getAttribute('data-act');

                if(dist < 4000) {
                    n.style.visibility = 'visible';
                    n.style.opacity = 1 - (dist / 3500);
                } else {
                    n.style.visibility = 'hidden';
                }

                // Audio Stop
                if(STATE.activeAudio && dist > 3000) {
                    const a = document.getElementById(STATE.activeAudio);
                    if(a && !a.paused) { a.pause(); document.querySelector('.monolith.playing').classList.remove('playing'); }
                }
            });

            // MONUMENT LOGIC (LESBARKEIT)
            document.querySelectorAll('.monument').forEach(m => {
                const z = parseInt(m.getAttribute('data-z'));
                // Berechne relative Distanz zur Kamera
                const relZ = z - STATE.scroll; 
                
                // Sichtbar wenn vor der Kamera (0 bis 3000)
                if(relZ > -500 && relZ < 3000) {
                    const opacity = 1 - (relZ / 2500);
                    m.style.opacity = opacity;
                    // Aktiviere Highlight wenn sehr nah (Lesebereich)
                    if(relZ < 1000 && relZ > 0) m.classList.add('active');
                    else m.classList.remove('active');
                } else {
                    m.style.opacity = 0;
                }
            });

            // CANVAS
            ctx.clearRect(0,0,STATE.w, STATE.h);
            stars.forEach(s => { s.update(speed + (bass/100)); s.draw(); });

            requestAnimationFrame(render);
        }

        // --- UTILS ---
        window.openData = (k) => {
            const c = CONTENT[k];
            document.getElementById('data-content-inject').innerHTML = `<h3>${c.title}</h3><p>${c.text}</p>`;
            document.getElementById('data-overlay').classList.add('active');
        };
        window.closeData = () => document.getElementById('data-overlay').classList.remove('active');
        window.toggleAudio = (id, el) => {
            if(STATE.audioCtx && STATE.audioCtx.state === 'suspended') STATE.audioCtx.resume();
            const a = document.getElementById(id);
            if(!a.paused) {
                a.pause(); el.classList.remove('playing'); STATE.activeAudio = null;
            } else {
                document.querySelectorAll('audio').forEach(x => { x.pause(); x.currentTime=0; });
                document.querySelectorAll('.monolith').forEach(m => m.classList.remove('playing'));
                a.play(); el.classList.add('playing'); STATE.activeAudio = id;
            }
        };
        window.addEventListener('keydown', e => { if(e.key === 'Escape') closeData(); });

    </script>
</body>
</html>
