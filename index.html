<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEMOKRATIE 2.0 | Der Abstieg in die Souver√§nit√§t</title>
    <style>
        :root {
            --void: #050505;
            --gold: #d4af37;
            --platinum: #e5e4e2;
            --gold-dim: rgba(212, 175, 55, 0.3);
            --font-main: 'Helvetica Neue', Arial, sans-serif; /* Platzhalter f√ºr System-Font */
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background-color: var(--void);
            color: var(--platinum);
            font-family: var(--font-main);
            overflow-x: hidden;
            /* Wir behalten das native Scrollen bei, nutzen die Werte aber f√ºr 3D-Transforms */
            height: 15000px; /* Virtuelle H√∂he f√ºr den Tunnel-Weg */
        }

        /* --- LAYER 0: CANVAS (PARTIKEL) --- */
        #sovereign-field {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 0;
            pointer-events: none;
        }

        /* --- LAYER 1: TUNNEL (INHALT) --- */
        #tunnel-viewport {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            perspective: 1000px;
            z-index: 1;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #tunnel-world {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            will-change: transform;
        }

        .node {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%); /* Zentrierung */
            text-align: center;
            width: 80vw;
            max-width: 800px;
            /* Initialer State f√ºr Fail-Safe (wird von JS √ºberschrieben) */
            opacity: 1; 
        }

        /* Typografie & UI */
        h1 {
            font-size: 4rem;
            text-transform: uppercase;
            letter-spacing: 0.2em;
            color: var(--gold);
            margin-bottom: 1rem;
            text-shadow: 0 0 20px var(--gold-dim);
        }

        h2 {
            font-size: 2rem;
            color: var(--platinum);
            font-weight: 300;
            border-bottom: 1px solid var(--gold);
            display: inline-block;
            padding-bottom: 0.5rem;
            margin-bottom: 2rem;
        }

        p {
            font-size: 1.2rem;
            line-height: 1.6;
            max-width: 600px;
            margin: 0 auto;
        }

        .media-container {
            margin-top: 2rem;
            border: 1px solid var(--gold);
            padding: 1rem;
            background: rgba(5, 5, 5, 0.8);
        }

        .icon {
            font-size: 3rem;
            display: block;
            margin-bottom: 1rem;
        }

        /* --- OUTRO / NAVIGATION --- */
        .outro-links {
            display: flex;
            gap: 2rem;
            justify-content: center;
            margin-top: 3rem;
        }

        .btn {
            padding: 1rem 2rem;
            border: 1px solid var(--gold);
            color: var(--gold);
            text-decoration: none;
            text-transform: uppercase;
            transition: all 0.3s ease;
        }

        .btn:hover {
            background: var(--gold);
            color: var(--void);
            box-shadow: 0 0 15px var(--gold);
        }

        /* Scroll-Bar verstecken (f√ºr Immersion) */
        ::-webkit-scrollbar { width: 0; }
        
        #loading-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--void);
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--gold);
            transition: opacity 1s ease;
        }
    </style>
</head>
<body>

    <div id="loading-overlay">Œ¶ | INITIALIZING SOVEREIGNTY...</div>

    <canvas id="sovereign-field"></canvas>

    <div id="tunnel-viewport">
        <div id="tunnel-world">
            
            <section class="node" id="prolog" data-z="0">
                <h1>Stasis</h1>
                <p>Der politische Stau. Parteien als Gatekeeper.<br>Willkommen im Ende der Geschichte.</p>
                <div style="margin-top: 2rem; font-size: 0.8rem; color: var(--gold);">SCROLL TO DESCEND</div>
            </section>

            <section class="node" id="act-1" data-z="3000">
                <span class="icon">üèõÔ∏è</span>
                <h2>Der Ursprung</h2>
                <div class="media-container">
                    <p>[AUDIO-SLOT: Aristoteles & Die Isonomie]</p>
                    <p><i>"Wahlen sind oligarchisch, das Los ist demokratisch."</i></p>
                </div>
            </section>

            <section class="node" id="act-2" data-z="6000">
                <span class="icon">‚öñÔ∏è</span>
                <h2>Die Logik des Zufalls</h2>
                <div class="media-container">
                    <p>[VIDEO-SLOT: Wahl vs. Los]</p>
                    <p>Korruption durchbrechen. Kompetenz durch Diversit√§t ersetzen.</p>
                </div>
            </section>

            <section class="node" id="act-3" data-z="9000">
                <span class="icon">üå™Ô∏è</span>
                <h2>Die Moderne Krise</h2>
                <div class="media-container">
                    <p>[AUDIO-SLOT: Gegen Wahlen]</p>
                    <p>Warum wir unsere Demokratie retten m√ºssen, indem wir sie neu erfinden.</p>
                </div>
            </section>

            <section class="node" id="act-4" data-z="12000">
                <span class="icon">‚ú®</span>
                <h2>Demokratie 2.0</h2>
                <div class="media-container">
                    <p>[VIDEO-SLOT: Die Kinetische Isonomie]</p>
                    <p>Keine Politiker mehr. B√ºrger. Verantwortung. Freiheit.</p>
                </div>
            </section>

            <section class="node" id="outro" data-z="15000">
                <h1>Souver√§nit√§t</h1>
                <p>Du bist am Grund angekommen. Baue neu.</p>
                <div class="outro-links">
                    <a href="#" class="btn">Manifest (PDF)</a>
                    <a href="https://www.youtube.com/@ArdalanIbrahim" target="_blank" class="btn">NUTT LOS (YT)</a>
                </div>
            </section>

        </div>
    </div>

    <script type="module">
        // SOVEREIGN IMPORT: Lokaler Pfad, keine Cloud.
        import { 
            animate, 
            timeline, 
            stagger, 
            utils 
        } from './dist/modules/index.js';

        // --- KONFIGURATION ---
        const CONFIG = {
            tunnelDepth: 15000, // Maximale Tiefe (muss zur CSS height passen)
            particleCount: 200,
            gold: '#d4af37',
            white: '#e5e4e2'
        };

        // --- DOM ELEMENTE ---
        const world = document.getElementById('tunnel-world');
        const nodes = document.querySelectorAll('.node');
        const canvas = document.getElementById('sovereign-field');
        const ctx = canvas.getContext('2d');
        const loader = document.getElementById('loading-overlay');

        // --- INITIALISIERUNG (Z-Positionierung) ---
        // Wir setzen die Nodes initial via JS an ihre Z-Positionen,
        // damit sie im 'Stasis'-Zustand (ohne JS) lesbar √ºbereinander liegen w√ºrden (Fail-Safe),
        // aber mit JS korrekt in den Raum verteilt werden.
        nodes.forEach(node => {
            const z = node.getAttribute('data-z');
            node.style.transform = `translate(-50%, -50%) translateZ(${z}px)`;
            // Initial unsichtbar machen, wir faden sie logisch ein
            node.style.opacity = '0.3'; 
        });

        // Loader ausblenden
        setTimeout(() => {
            loader.style.opacity = '0';
            setTimeout(() => loader.remove(), 1000);
        }, 500);


        // --- ENGINE 1: SCROLLYTELLING (Der Tunnel) ---
        // Wir koppeln die native Scroll-Position an die Z-Achse der Welt.
        
        let currentScroll = 0;
        let targetScroll = 0;

        // Loop f√ºr geschmeidige Interpolation (Lerp)
        function renderTunnel() {
            targetScroll = window.scrollY;
            
            // Lerp f√ºr weiches Gef√ºhl (0.1 Faktor)
            currentScroll += (targetScroll - currentScroll) * 0.1;

            // Die ganze Welt bewegt sich auf uns zu (-Z)
            // Wir f√ºgen Rotation hinzu f√ºr leichte Desorientierung/Dynamik
            world.style.transform = `translateZ(${-currentScroll}px) rotateZ(${currentScroll * 0.002}deg)`;

            // Opacity Logic: Elemente, die nah sind, leuchten auf
            nodes.forEach(node => {
                const nodeZ = parseInt(node.getAttribute('data-z'));
                const distance = Math.abs(nodeZ - currentScroll);
                
                // Fokus-Bereich: +/- 500px um die Kamera
                if(distance < 800) {
                    const opacity = 1 - (distance / 800);
                    node.style.opacity = Math.max(0, opacity);
                    node.style.filter = `blur(${distance * 0.01}px)`;
                } else {
                    node.style.opacity = 0;
                }
            });

            requestAnimationFrame(renderTunnel);
        }
        renderTunnel();


        // --- ENGINE 2: PARTIKEL SYSTEM (Canvas) ---
        let width, height;
        let particles = [];

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        class Particle {
            constructor() {
                this.reset();
            }
            reset() {
                this.x = Math.random() * width;
                this.y = Math.random() * height;
                this.z = Math.random() * 2; // Parallax Tiefe
                this.size = Math.random() * 2;
                this.vx = (Math.random() - 0.5) * 0.5;
                this.vy = (Math.random() - 0.5) * 0.5;
                this.alpha = Math.random() * 0.5 + 0.1;
            }
            update() {
                // Maus Parallax (simuliert)
                // Hier k√∂nnte man echte Maus-Koordinaten einkoppeln
                this.x += this.vx;
                this.y += this.vy;

                // Wrap around
                if(this.x > width) this.x = 0;
                if(this.x < 0) this.x = width;
                if(this.y > height) this.y = 0;
                if(this.y < 0) this.y = height;
            }
            draw() {
                ctx.fillStyle = CONFIG.gold;
                ctx.globalAlpha = this.alpha;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        // Init Particles
        for(let i=0; i < CONFIG.particleCount; i++) {
            particles.push(new Particle());
        }

        function renderParticles() {
            ctx.clearRect(0, 0, width, height);
            
            // Wenn wir schnell scrollen, verzerren sich die Partikel (Warp Speed Effekt)
            // Hier simple Version:
            particles.forEach(p => {
                p.update();
                p.draw();
            });
            requestAnimationFrame(renderParticles);
        }
        renderParticles();

        // --- HAPTIK: Mouse Parallax ---
        // Zus√§tzliche subtile Bewegung basierend auf Mausposition
        document.addEventListener('mousemove', (e) => {
            const x = (e.clientX / width - 0.5) * 20; // -10 bis 10
            const y = (e.clientY / height - 0.5) * 20;
            
            // Wir bewegen den Viewport leicht gegen die Maus
            document.getElementById('tunnel-viewport').style.transform = 
                `translateX(${-x}px) translateY(${-y}px)`;
        });

    </script>
</body>
</html>
