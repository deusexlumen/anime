<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEMOKRATIE 2.0 | Das Archiv</title>
    <style>
        :root {
            /* Palette: Warmes, dunkles "Archiv"-Feeling statt kaltem Weltraum */
            --void: #08080a; 
            --stone: #1a1a1d;
            --gold: #d4af37;
            --gold-dim: rgba(212, 175, 55, 0.1);
            --text-main: #e0e0e0;
            --highlight: #f0f0f0;
            --danger: #b03030;
            --font-main: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            --font-serif: 'Georgia', serif; /* Seriöser für Zitate */
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            background-color: var(--void);
            color: var(--text-main);
            font-family: var(--font-main);
            overflow-x: hidden;
            height: 45000px;
            overscroll-behavior: none;
            cursor: default;
        }

        /* --- ATMOSPHERE (DUST & FLOOR) --- */
        #dust-layer { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 0; pointer-events: none; }
        
        /* Ein Boden-Grid für räumliche Orientierung (Kein Fliegen) */
        #floor {
            position: fixed; bottom: 0; left: 0; width: 100%; height: 40%;
            background: linear-gradient(to bottom, transparent, #050505),
                        repeating-linear-gradient(90deg, transparent 0, transparent 199px, rgba(212,175,55,0.05) 200px),
                        repeating-linear-gradient(0deg, transparent 0, transparent 199px, rgba(212,175,55,0.05) 200px);
            transform: perspective(500px) rotateX(60deg) scale(2);
            transform-origin: bottom center;
            z-index: 0; pointer-events: none; opacity: 0.3;
        }

        /* Vignette für Fokus */
        #vignette {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, transparent 40%, var(--void) 120%);
            z-index: 1; pointer-events: none;
        }

        /* --- THE TUNNEL --- */
        #tunnel-viewport {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            perspective: 800px; /* Flachere Perspektive für Lesbarkeit */
            z-index: 2; overflow: hidden;
            display: flex; justify-content: center; align-items: center;
        }

        #tunnel-world {
            position: absolute; width: 100%; height: 100%;
            transform-style: preserve-3d; will-change: transform;
        }

        /* --- MAIN NODES (CONTENT) --- */
        .node {
            position: absolute; top: 50%; left: 50%;
            width: 80vw; max-width: 900px; text-align: center; opacity: 0;
            transform: translate3d(-50%, -50%, 0); backface-visibility: hidden;
            z-index: 20; /* Über den Text-Wolken */
        }

        /* --- THE WALL OF TRUTH (Readable Side Text) --- */
        .wall-text {
            position: absolute; top: 50%; left: 50%;
            font-family: var(--font-serif);
            font-size: 2rem; 
            font-weight: 700; 
            color: rgba(255,255,255,0.15); /* Subtil aber lesbar */
            white-space: nowrap; 
            pointer-events: none;
            transform-style: preserve-3d;
            text-align: center;
            transition: opacity 0.5s ease, color 0.3s ease;
        }
        /* Wenn Text in den Fokus kommt, wird er heller */
        .wall-text.focused { color: rgba(212, 175, 55, 0.6); opacity: 1; }

        /* --- MONOLITH UI --- */
        .monolith {
            padding: 3rem; background: rgba(15, 15, 18, 0.95);
            border: 1px solid rgba(255,255,255,0.1);
            border-top: 4px solid var(--gold); /* Architect Style */
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            position: relative; overflow: hidden; 
            transition: all 0.6s cubic-bezier(0.1, 0.9, 0.2, 1);
        }

        .monolith:hover { transform: translateY(-5px); border-color: rgba(255,255,255,0.3); }
        .monolith.playing { border-color: var(--gold); box-shadow: 0 0 60px rgba(212, 175, 55, 0.15); }

        /* --- TYPOGRAPHY --- */
        h1 { font-size: clamp(3rem, 8vw, 10rem); font-weight: 800; color: var(--gold); margin-bottom: 2rem; letter-spacing: -0.02em; }
        h2 { font-size: 0.9rem; letter-spacing: 0.4em; text-transform: uppercase; color: #888; margin-bottom: 2rem; display: block; border-bottom: 1px solid #333; padding-bottom: 10px; }
        
        .quote-main { font-family: var(--font-serif); font-size: 1.6rem; font-weight: 400; line-height: 1.5; color: #ddd; margin-bottom: 1rem; font-style: italic; }
        .quote-sub { font-size: 0.8rem; color: var(--gold); font-family: sans-serif; text-transform: uppercase; letter-spacing: 0.1em; }

        /* --- BUTTONS --- */
        .action-bar { margin-top: 2rem; display: flex; justify-content: center; gap: 15px; }
        .btn {
            padding: 12px 25px; border: 1px solid #444; color: #aaa;
            font-size: 0.7rem; letter-spacing: 0.2em; cursor: pointer; text-decoration: none;
            transition: 0.3s; text-transform: uppercase; background: transparent;
        }
        .btn:hover { border-color: var(--gold); color: var(--gold); background: rgba(212,175,55,0.05); }
        .btn-play { border-color: var(--gold); color: var(--gold); }
        .btn-play:hover { background: var(--gold); color: #000; }

        /* --- DATA OVERLAY --- */
        #data-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(5,5,5,0.98); z-index: 9999;
            display: flex; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; transition: opacity 0.5s ease;
        }
        #data-overlay.active { opacity: 1; pointer-events: all; }
        .data-card {
            width: 80%; max-width: 800px; max-height: 80vh; overflow-y: auto;
            padding: 4rem; border: 1px solid #333;
        }
        .data-content h3 { font-size: 2rem; color: var(--gold); margin-bottom: 1.5rem; font-family: var(--font-serif); }
        .data-content p { font-size: 1.1rem; line-height: 1.8; color: #ccc; margin-bottom: 1.5rem; }
        .close-data { position: absolute; top: 30px; right: 30px; font-size: 1.5rem; color: #666; cursor: pointer; }
        .close-data:hover { color: #fff; }

        /* --- START SCREEN --- */
        #start-screen {
            position: fixed; inset: 0; background: var(--void); z-index: 10000;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        .init-btn {
            border: 1px solid var(--gold); padding: 20px 50px; color: var(--gold);
            font-size: 0.9rem; letter-spacing: 0.4em; cursor: pointer; transition: 0.5s;
            text-transform: uppercase; background: transparent;
        }
        .init-btn:hover { background: var(--gold); color: #000; }

        /* --- LINKS SECTION --- */
        .link-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 3rem;
        }
        .link-item {
            padding: 1.5rem; border: 1px solid #333; color: #888; text-decoration: none;
            transition: 0.3s; text-align: left;
        }
        .link-item:hover { border-color: var(--gold); color: #fff; background: rgba(212,175,55,0.05); }
        .link-item span { display: block; font-size: 0.7rem; color: var(--gold); letter-spacing: 0.2em; margin-bottom: 0.5rem; }
        .link-item strong { display: block; font-size: 1rem; font-weight: 400; }

        ::-webkit-scrollbar { width: 0; }
    </style>
    
    <script src="./dist/bundles/anime.umd.js"></script>
</head>
<body>

    <div id="data-overlay">
        <div class="close-data" onclick="closeData()">×</div>
        <div class="data-card">
            <div id="data-content-inject" class="data-content"></div>
        </div>
    </div>

    <div id="start-screen">
        <div class="init-btn" onclick="initializeArchive()">ARCHIV BETRETEN</div>
    </div>

    <canvas id="dust-layer"></canvas>
    <div id="floor"></div>
    <div id="vignette"></div>

    <div id="tunnel-viewport">
        <div id="tunnel-world">
            
            <div id="text-wall-container"></div>

            <section class="node" data-z="0" data-act="prolog">
                <h1>STASIS</h1>
                <p class="quote-main" style="border:none;">"Die fortwährende Aristokratie."</p>
                <div style="margin-top: 10rem; opacity: 0.5; font-size: 0.7rem; letter-spacing: 0.3em;">SCROLLEN ZUM EINTAUCHEN</div>
            </section>

            <section class="node" data-z="6000" data-act="illusion">
                <h2>PHASE I: ILLUSION</h2>
                <audio id="audio-1" src="./2Wie_Bildung_einen_neuen_Adel_schafft.m4a" preload="auto"></audio>
                
                <div class="monolith">
                    <div class="quote-main">"Bildungsideale sind die Geißel der Menschheit."</div>
                    <div class="quote-sub">FILE: 2_Bildungsadel.m4a</div>
                    
                    <div class="action-bar">
                        <div class="btn btn-play" onclick="toggleAudio('audio-1', this.parentNode.parentNode)">▶ ABSPIELEN</div>
                        <div class="btn" onclick="openData('bildung')">✚ ANALYSE</div>
                    </div>
                </div>
            </section>

            <section class="node" data-z="12000" data-act="danger">
                <h2 style="color:var(--danger); border-color:var(--danger);">PHASE II: DER BRAND</h2>
                <audio id="audio-2" src="./3Parteien_als_historischer_Brandbeschleuniger_fuer_Diktaturen.m4a" preload="auto"></audio>
                
                <div class="monolith" style="border-top-color: var(--danger);">
                    <div class="quote-main">"Parteien sind Brandbeschleuniger für Diktaturen."</div>
                    <div class="quote-sub" style="color:var(--danger);">FILE: 3_Brandbeschleuniger.m4a</div>
                    
                    <div class="action-bar">
                        <div class="btn" style="border-color:var(--danger); color:var(--danger);" onclick="toggleAudio('audio-2', this.parentNode.parentNode)">▶ WARNUNG</div>
                        <div class="btn" onclick="openData('parteien')">✚ FAKTEN</div>
                    </div>
                </div>
            </section>

            <section class="node" data-z="18000" data-act="void">
                <h2>PHASE III: DAS VAKUUM</h2>
                <audio id="audio-3" src="./1Warum_Politiker_eigentlich_keine_Politik_machen.m4a" preload="auto"></audio>
                
                <div class="monolith">
                    <div class="quote-main">"Politiker machen keine Politik."</div>
                    <div class="quote-sub">FILE: 1_Dienstleister.m4a</div>
                    
                    <div class="action-bar">
                        <div class="btn btn-play" onclick="toggleAudio('audio-3', this.parentNode.parentNode)">▶ ABSPIELEN</div>
                        <div class="btn" onclick="openData('politiker')">✚ ANALYSE</div>
                    </div>
                </div>
            </section>

            <section class="node" data-z="24000" data-act="solution">
                <h1 style="font-size: 7rem; text-shadow: 0 0 50px rgba(255,255,255,0.2);">ISONOMIE</h1>
                <audio id="audio-4" src="./4Losdemokratie_als_einziger_Schutz_vor_Faschismus.m4a" preload="auto"></audio>
                
                <div class="monolith" style="border-top-color: #fff;">
                    <div class="quote-main">"Der einzige Schutz vor Faschismus."</div>
                    <div class="quote-sub" style="color:#fff;">FILE: 4_Losdemokratie.m4a</div>
                    
                    <div class="action-bar">
                        <div class="btn" style="border-color:#fff; color:#fff;" onclick="toggleAudio('audio-4', this.parentNode.parentNode)">▶ MANIFESTO</div>
                        <div class="btn" onclick="openData('los')">✚ BLUEPRINT</div>
                    </div>
                </div>
            </section>

            <section class="node" data-z="30000" data-act="matrix">
                <h2 style="color:var(--gold); border-color:var(--gold);">DAS FUNDAMENT</h2>
                
                <div class="monolith" style="max-width: 1000px; width: 90vw; padding: 3rem;">
                    <p style="color:#888; text-align: left; max-width: 100%;">Quellen, Validierung und weitere Schritte.</p>
                    
                    <div class="link-grid">
                        <a href="https://losdemokratie.de/" target="_blank" class="link-item">
                            <span>WEBSEITE</span>
                            <strong>LOSDEMOKRATIE.DE</strong>
                        </a>
                        <a href="https://www.youtube.com/@nuttlos" target="_blank" class="link-item">
                            <span>YOUTUBE</span>
                            <strong>KANAL: NUTT LOS</strong>
                        </a>
                        <a href="https://www.amazon.de/Gegen-Wahlen-Warum-Abstimmen-demokratisch/dp/3835318713" target="_blank" class="link-item">
                            <span>LITERATUR</span>
                            <strong>GEGEN WAHLEN (V. REYBROUCK)</strong>
                        </a>
                        <a href="Argumentations-Matrix & System-Validierung.pdf" target="_blank" class="link-item">
                            <span>TECHNISCHE VALIDIERUNG</span>
                            <strong>MATRIX DOWNLOAD (PDF)</strong>
                        </a>
                    </div>
                </div>
            </section>

        </div>
    </div>

    <script>
        // --- TEXT WALL CONTENT ---
        const WALL_WORDS = [
            // Akt 1
            {t:"NEUER ADEL", z:3000}, {t:"PLATONS IRRTUM", z:3800}, 
            {t:"ARROGANZ", z:4500}, {t:"EXKLUSION", z:5200},
            {t:"HERRSCHAFTSWISSEN", z:6500}, {t:"IDIOTISCHE FANTASIE", z:7200},
            // Akt 2
            {t:"BRANDBESCHLEUNIGER", z:9000}, {t:"TYRANNEI", z:9800}, 
            {t:"PARTEIEN SIND SINNLOS", z:10500}, {t:"BÜRGERKRIEG", z:11200},
            {t:"SPALTUNG", z:12500}, {t:"KEIN GEWISSEN", z:13200},
            // Akt 3
            {t:"DIENSTLEISTER", z:15000}, {t:"UNPOLITISCHE GESELLSCHAFT", z:15800},
            {t:"LEGITIMATIONSKRISE", z:16500}, {t:"BERUFSPOLITIK", z:17200},
            {t:"VERWALTER", z:18500},
            // Akt 4
            {t:"WIR REGIEREN UNS", z:21000}, {t:"ISONOMIE", z:21800},
            {t:"GLEICHHEIT", z:22500}, {t:"SOUVERÄNITÄT", z:23200},
            {t:"ALEATORIK", z:24500}, {t:"FREIHEIT", z:25200}
        ];

        const CONTENT_DATA = {
            'bildung': { title: 'Der Bildungs-Adel', text: 'Unsere Kultur ist getrieben von der idiotischen Fantasie, dass Bildung ein Kriterium für Herrschaft sein sollte. Das ist purer Platonismus. Wir halten Individuen frei von Arbeit (Aristokraten), damit sie sich "bilden" und dann über uns herrschen. Demokratie bedeutet: JEDER ist fähig zu herrschen.' },
            'parteien': { title: 'Brandbeschleuniger', text: 'Parteien sind intern Diktaturen. Wer in eine Partei eintritt, gibt sein Gewissen an der Garderobe ab. Historisch gesehen verhindern Parteien keine Diktaturen – sie gebären sie. Wenn sich die Gesellschaft spaltet und Parteien gegeneinander Krieg führen, ist der Ruf nach dem "starken Mann" die logische Konsequenz.' },
            'politiker': { title: 'Der Dienstleister', text: 'Der Begriff "Politiker" ist ein Symptom des Verfalls. In einer Demokratie gibt es keine Politiker, weil ALLE Politiker sind. Was wir heute haben, sind gewählte Aristokraten. Politik ist eine Praxis, kein Beruf.' },
            'los': { title: 'Die Kinetische Lösung', text: 'Wenn wir alle regieren, kann kein Tyrann entstehen. Die Losdemokratie ist das einzige System, das Korruption strukturell unmöglich macht. Niemand kann "Karriere" machen. Niemand muss wiedergewählt werden. Es zählt nur das Sachproblem.' }
        };

        const STATE = { scroll: 0, target: 0, w: 0, h: 0, act: 'prolog', audioCtx: null, analyser: null, data: null, activeAudio: null };
        const CONFIG = { lerp: 0.05 }; 

        const world = document.getElementById('tunnel-world');
        const canvas = document.getElementById('dust-layer');
        const ctx = canvas.getContext('2d');

        // --- INIT ---
        window.initializeArchive = function() {
            window.scrollTo(0,0);
            try {
                STATE.audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                STATE.analyser = STATE.audioCtx.createAnalyser();
                STATE.analyser.fftSize = 256;
                STATE.data = new Uint8Array(STATE.analyser.frequencyBinCount);
                document.querySelectorAll('audio').forEach(el => {
                    const src = STATE.audioCtx.createMediaElementSource(el);
                    src.connect(STATE.analyser);
                    STATE.analyser.connect(STATE.audioCtx.destination);
                });
            } catch(e) {}
            document.getElementById('start-screen').style.opacity = 0;
            setTimeout(() => document.getElementById('start-screen').remove(), 1000);
            render();
        };

        // --- WALL TEXT GENERATOR ---
        function initWall() {
            const container = document.getElementById('text-wall-container');
            WALL_WORDS.forEach((item, index) => {
                const el = document.createElement('div');
                el.className = 'wall-text';
                el.textContent = item.t;
                
                // Positionierung: Links und Rechts abwechselnd, aber sehr weit außen
                const side = index % 2 === 0 ? -1 : 1;
                const x = side * 500; // 500px Abstand zur Mitte -> Gut lesbar an der Seite
                
                el.style.transform = `translate3d(-50%, -50%, 0) translate3d(${x}px, 0px, ${item.z}px)`;
                el.setAttribute('data-z', item.z);
                
                // Farbe für Akt 2
                if(item.z > 9000 && item.z < 14000) el.style.color = 'rgba(180, 50, 50, 0.2)';
                
                container.appendChild(el);
            });
        }

        function init() {
            const r = () => { STATE.w = canvas.width = window.innerWidth; STATE.h = canvas.height = window.innerHeight; };
            window.addEventListener('resize', r); r();
            initWall();
            document.querySelectorAll('.node').forEach(n => {
                n.style.transform = `translate3d(-50%, -50%, ${n.getAttribute('data-z')}px)`;
            });
        }
        init();

        // --- DUST PARTICLES (ATMOSPHERE) ---
        // Kein Warp-Effekt mehr. Langsames Schweben nach oben (Goldstaub).
        class Dust {
            constructor() { this.reset(); }
            reset() {
                this.x = Math.random() * STATE.w;
                this.y = Math.random() * STATE.h;
                this.size = Math.random() * 2;
                this.speed = Math.random() * 0.2 + 0.1;
                this.alpha = Math.random() * 0.5 + 0.1;
            }
            update() {
                this.y -= this.speed; // Immer nach oben
                if(this.y < 0) this.y = STATE.h;
            }
            draw() {
                ctx.fillStyle = STATE.act === 'danger' ? '#aa3333' : '#d4af37';
                ctx.globalAlpha = this.alpha;
                ctx.fillRect(this.x, this.y, this.size, this.size);
            }
        }
        const dust = Array.from({length: 150}, () => new Dust());

        // --- LOOP ---
        function render() {
            STATE.target = window.scrollY;
            const diff = STATE.target - STATE.scroll;
            STATE.scroll += diff * CONFIG.lerp;

            let bass = 0;
            if(STATE.analyser) {
                STATE.analyser.getByteFrequencyData(STATE.data);
                bass = STATE.data[10];
            }

            // MOVEMENT (Pure Z, no distortion)
            world.style.transform = `translate3d(0, 0, ${-STATE.scroll.toFixed(2)}px)`;

            // NODES
            document.querySelectorAll('.node').forEach(n => {
                const z = parseInt(n.getAttribute('data-z'));
                const dist = Math.abs(z - STATE.scroll);
                if(dist < 2000) STATE.act = n.getAttribute('data-act');

                if(dist < 3500) {
                    n.style.visibility = 'visible';
                    n.style.opacity = 1 - (dist / 3000);
                } else {
                    n.style.visibility = 'hidden';
                }

                if(STATE.activeAudio && dist > 2000) {
                    const a = document.getElementById(STATE.activeAudio);
                    if(a && !a.paused) { a.pause(); document.querySelector('.monolith.playing').classList.remove('playing'); }
                }
            });

            // WALL TEXT VISIBILITY
            document.querySelectorAll('.wall-text').forEach(w => {
                const z = parseInt(w.getAttribute('data-z'));
                const dist = Math.abs(z - STATE.scroll);
                
                // Focus Logic: Wenn nah dran, wird es hell
                if(dist < 1500) {
                    w.style.opacity = 1 - (dist / 1500);
                    if(dist < 500) w.classList.add('focused');
                    else w.classList.remove('focused');
                } else {
                    w.style.opacity = 0;
                }
            });

            // CANVAS
            ctx.clearRect(0,0,STATE.w, STATE.h);
            dust.forEach(d => { d.update(); d.draw(); });

            requestAnimationFrame(render);
        }

        // --- UTILS ---
        window.openData = (k) => {
            const c = CONTENT_DATA[k];
            document.getElementById('data-content-inject').innerHTML = `<h3>${c.title}</h3><p>${c.text}</p>`;
            document.getElementById('data-overlay').classList.add('active');
        };
        window.closeData = () => document.getElementById('data-overlay').classList.remove('active');
        window.toggleAudio = (id, el) => {
            if(STATE.audioCtx && STATE.audioCtx.state === 'suspended') STATE.audioCtx.resume();
            const a = document.getElementById(id);
            if(!a.paused) {
                a.pause(); el.classList.remove('playing'); STATE.activeAudio = null;
            } else {
                document.querySelectorAll('audio').forEach(x => { x.pause(); x.currentTime=0; });
                document.querySelectorAll('.monolith').forEach(m => m.classList.remove('playing'));
                a.play(); el.classList.add('playing'); STATE.activeAudio = id;
            }
        };
        window.addEventListener('keydown', e => { if(e.key === 'Escape') closeData(); });

    </script>
</body>
</html>
